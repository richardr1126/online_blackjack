<!DOCTYPE html>
<html>
	<head>
		<title>Profile</title>
		<%- include('../partials/head') %>

		<script src="../resources/js/my_script.js"></script>

		<%- include('../partials/navbar') %>
	</head>
	<body style="background-color: <%= color_choice %>;">
		<div class="container"  style= "margin-top: 7rem; align-items: center;">
			<div class="row no-gutters">
				<div class="rounded-circle"><img src="<%= picture_src %>" width="275" height="327"></div>
				<div class="col-md-9 col-lg-9">
					<div class="d-flex flex-column">
						<div class="d-flex flex-row justify-content-between align-items-center p-5 bg-dark text-white">
							<h4><class="display-2"><%= user.username %></h4>
						</div>
						<div class="p-1 bg-black text-white">
						</div>
						<div class="d-flex flex-row text-white">
							<div class="p-5 bg-dark text-center skill-block">
								<h4>Wins</h4>
								<h6><%= user.wins %></h6>
							</div>
							<div class="p-5 bg-dark text-center skill-block">
								<h4>Losses</h4>
								<h6><%= user.losses %></h6>
							</div>
							<div class="p-5 bg-dark text-center skill-block">
								<h4>Games played</h4>
								<h6><%= user.games_played %></h6>
							</div>
							<div class="p-5 bg-dark text-center skill-block">
								<h4>Win %</h4>
								<h6><%= Math.trunc((user.wins/user.games_played)*100) %>%</h6>
							</div>
							<div class="p-5 bg-dark text-center skill-block">
								<h4>Currency</h4>
								<h6>$<%= user.currency_owned %></h6>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">
			<h3 class ="mt-5"style="text-align: center; color:aliceblue">Inventory</h3>
			<div class="card-columns">
				<% if (typeof items != 'undefined') { %>
					<% items.forEach(item => { %>
						<% if (item.type == 'background') { %>
							<form action="/select_background" method="post">
								<div class="card mx-auto border-primary text-white bg-dark">
									<img class="card-img-top" src="<%= item.imgsrc %>">
									<div class="card-body">
										<h5 class="card-title">Background</h5>
										<input type="hidden" class="form-control" id="bgCOLOR" name="bgCOLOR" value="<%= item.name %>">
										<button class="btn btn-primary" onclick="this.form.submit()">Select</a>
									</div>
								</div>
							</form>
						<% } %>
						<% if (item.type == 'profile') { %>
							<form action="/select_profile" method="post">
								<div class="card mx-auto border-primary text-white bg-dark">
									<img class="card-img-top" src="<%= item.imgsrc %>">
									<div class="card-body">
										<h5 class="card-title">Profile Picture</h5>
										<input type="hidden" class="form-control" id="picture_src" name="picture_src" value="<%= item.name %>">
										<button class="btn btn-primary" onclick="this.form.submit()">Select</a>
									</div>
								</div>
							</form>
						<% } %>
						<% if (item.type == 'card') { %>
							<form action="/select_card" method="post">
								<div class="card mx-auto border-primary text-white bg-dark">
									<img class="card-img-top" src="<%= item.imgsrc %>">
									<div class="card-body">
										<h5 class="card-title">Card Background</h5>
										<input type="hidden" class="form-control" id="cardColor" name="cardColor" value="<%= item.name %>">
										<button class="btn btn-primary" onclick="this.form.submit()">Select</a>
									</div>
								</div>
							</form>
						<% } %>
					<% }) %>
				<% } %>
			</div>
		</div>
	</body>
</html>